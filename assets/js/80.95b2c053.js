(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{221:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"检测用户是否登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检测用户是否登录"}},[t._v("#")]),t._v(" 检测用户是否登录")]),t._v(" "),n("p",[t._v("很多时候我们需要检测用户是否登录, 如果登录, 才能做接下来的操作, 如果用户没有登录, 则弹框提示。比如加入购物车, 收藏商品等, 基于这个需求, 封装了一个通用方法, 如果需要根据业务定制, 则需要再做二次封装, 该方法需要配合本地存储一起使用。")]),t._v(" "),n("h3",{attrs:{id:"检测用户是否登录-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#检测用户是否登录-2"}},[t._v("#")]),t._v(" 检测用户是否登录")]),t._v(" "),n("p",[t._v("checkLogin(key, next, item = null, title = '检测到您未登录', content = '是否立即跳转到登录页面', loginPath, cancel, confirmColor, cancelColor, confirmText, cancelText)"),n("br"),t._v(" "),n("code",[t._v("key")]),t._v(": 本地存储用户信息的键名  。\n"),n("code",[t._v("next")]),t._v(": 用户已登录执行的回调, 该参数为一个函数。"),n("br"),t._v(" "),n("code",[t._v("item")]),t._v(": "),n("code",[t._v("next")]),t._v("函数需要传的参数, 如果"),n("code",[t._v("next")]),t._v("函数没有参数则为"),n("code",[t._v("null")]),t._v("。"),n("br"),t._v(" "),n("code",[t._v("title")]),t._v(": 弹框的标题, 默认为检测到您未登录。"),n("br"),t._v(" "),n("code",[t._v("content")]),t._v(": 弹框的提示内容, 是否立即跳转到登录页面。"),n("br"),t._v(" "),n("code",[t._v("loginPath")]),t._v(": 未登录时, 用户点击确认按钮需要跳转的登录路径, 需要在"),n("code",[t._v("pages.json")]),t._v("里配置。"),n("br"),t._v(" "),n("code",[t._v("cancel")]),t._v(": 用户点击取消按钮执行的回调函数。"),n("br"),t._v(" "),n("code",[t._v("confirmText")]),t._v(": 确认按钮的文字。"),n("br"),t._v(" "),n("code",[t._v("confirmColor")]),t._v(": 确认按钮的文字颜色。\n"),n("code",[t._v("cancelText")]),t._v(": 取消按钮的文字。"),n("br"),t._v(" "),n("code",[t._v("cancelColor")]),t._v(": 取消按钮的文字颜色。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("cc"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("button @click"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("加入购物车"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("cc"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  methods"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要先定义加入购物车的函数 传入到next参数里")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addCart")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模拟加入购物车请求")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$cc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("http")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/addCart'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" item\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$cc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkLogin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        next"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addCart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        item"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          price"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'可乐'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        loginPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/pages/login/login'")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);